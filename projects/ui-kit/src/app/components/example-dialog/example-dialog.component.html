<div class="example-dialog-content">
  <div class="dialog-header-section">
    <div class="header-icon">
      <i class="pi pi-send"></i>
    </div>
    <p class="header-description">
      Complete the form below to submit your request. All fields marked with
      validation are required.
    </p>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-fields">
      <i-input-text
        label="Your Message"
        formControlName="message"
        placeholder="Enter your message here..."
        [fluid]="true"
      >
      </i-input-text>

      <i-input-text
        label="Your Name"
        formControlName="user"
        placeholder="Enter your full name"
        type="text"
        [fluid]="true"
      >
      </i-input-text>

      <div class="listbox-section">
        <i-listbox
          label="Assign to Departments"
          [options]="departmentOptions$ | async"
          optionLabel="name"
          optionValue="id"
          formControlName="selectedDepartments"
          [multiple]="true"
          [filter]="true"
          [showClear]="true"
          [maxSelectedLabels]="2"
          selectedItemsLabel="{0} departments selected"
        >
        </i-listbox>
      </div>
    </div>
  </form>

  <div class="form-summary">
    <div class="summary-row">
      <span class="summary-label">Form Status:</span>
      <span
        class="summary-value"
        [class.valid]="form.valid"
        [class.invalid]="!form.valid"
      >
        <i
          [class]="
            form.valid ? 'pi pi-check-circle' : 'pi pi-exclamation-circle'
          "
        ></i>
        {{ form.valid ? "Ready to submit" : "Please complete all fields" }}
      </span>
    </div>
    <div class="summary-row">
      <span class="summary-label">Departments:</span>
      <span class="summary-value"
        >{{ (departmentOptions$ | async)?.length || 0 }} available</span
      >
    </div>
  </div>
</div>
<div slot="footer">
  <i-dialog-actions
    (cancelEvent)="onHide()"
    (submitEvent)="onSubmit()"
    submitLabel="Submit Request"
    cancelLabel="Discard"
    [showCancel]="false"
  ></i-dialog-actions>
</div>
