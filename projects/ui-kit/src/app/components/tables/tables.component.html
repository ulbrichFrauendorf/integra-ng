<div class="tables-demo">
  <!-- Whisper container required for toast/whisper messages from demo actions -->
  <i-whisper [position]="'top-right'" [key]="'global'"></i-whisper>
  <header class="demo-header">
    <h1>Table Component</h1>
    <p>
      A comprehensive table component with sorting, filtering, selection, and
      row actions. All features are configurable via props.
    </p>
  </header>

  <div class="cards-container">
    <!-- Basic Table with Sorting & Filtering -->
    <app-demo-card
      [title]="'Basic Table with Sorting & Filtering'"
      [sourceCode]="codeExamples.filtering"
    >
      <p class="demo-description">
        Click column headers to sort. Use global search or column filters to
        narrow results.
      </p>
      <i-table
        [data]="products"
        [columns]="filterableColumns"
        [sortable]="true"
        [filterable]="true"
        [globalFilter]="true"
        [height]="'350px'"
        (onSort)="onSort($event)"
        (onFilter)="onFilter($event)"
      >
      </i-table>
    </app-demo-card>

    <!-- Selection & Actions -->
    <app-demo-card
      [title]="'Selection & Row Actions'"
      [sourceCode]="codeExamples.actions"
    >
      <p class="demo-description">
        Select rows with checkboxes. Action buttons support conditional disable
        (delete disabled for out of stock).
        <strong>Selected: {{ selectedProducts.length }} products</strong>
      </p>
      <i-table
        [data]="products"
        [columns]="basicColumns"
        selectionMode="multiple"
        [(selection)]="selectedProducts"
        [showActions]="true"
        [actions]="tableActions"
        [striped]="true"
        [height]="'300px'"
        (onSelectionChange)="onSelectionChange($event)"
        (onAction)="handleAction($event)"
      >
      </i-table>
    </app-demo-card>

    <!-- Grouped Data with Actions -->
    <app-demo-card
      [title]="'Grouped Data'"
      [sourceCode]="codeExamples.groupedWithActions"
    >
      <p class="demo-description">
        Organize data into expandable groups. Click group headers to
        expand/collapse. Each row can have actions.
      </p>
      <i-table
        [groupedData]="groupedProductsWithActions"
        [columns]="basicColumns"
        [sortable]="true"
        [showActions]="true"
        [actions]="viewActions"
        [striped]="true"
        (onAction)="handleAction($event)"
      >
      </i-table>
    </app-demo-card>

    <!-- Visual Variants & Sizes -->
    <app-demo-card
      [title]="'Visual Variants & Sizes'"
      [sourceCode]="codeExamples.visual"
    >
      <div class="visual-examples">
        <div class="visual-example">
          <h4>Small - Striped & Bordered</h4>
          <i-table
            [data]="products.slice(0, 4)"
            [columns]="basicColumns"
            [striped]="true"
            [bordered]="true"
            size="small"
          >
          </i-table>
        </div>
        <div class="visual-example">
          <h4>Large Size</h4>
          <i-table
            [data]="products.slice(0, 3)"
            [columns]="basicColumns"
            size="large"
          >
          </i-table>
        </div>
      </div>
    </app-demo-card>

    <!-- Custom Header & Download -->
    <app-demo-card
      [title]="'Custom Header & Export'"
      [sourceCode]="codeExamples.download"
    >
      <p class="demo-description">
        Add custom header content with ng-content. Export data to CSV, JSON, or
        Excel.
      </p>
      <i-table
        [data]="products"
        [columns]="fullColumns"
        [globalFilter]="true"
        [downloadable]="true"
        downloadMode="direct"
        downloadFormat="csv"
        downloadFilename="products-inventory"
        [striped]="true"
      >
        <div header style="display: flex; align-items: center; gap: 8px">
          <i
            class="pi pi-box"
            style="font-size: 1.5rem; color: var(--color-primary)"
          ></i>
          <h3 style="margin: 0; font-size: 1.1rem">Product Inventory</h3>
        </div>
      </i-table>
    </app-demo-card>

    <!-- Full Featured Table -->
    <app-demo-card
      [title]="'Full Featured Example'"
      [sourceCode]="codeExamples.full"
    >
      <p class="demo-description">
        All features combined: sorting, filtering, selection, actions, and
        visual customization.
      </p>
      <i-table
        [data]="products"
        [columns]="fullColumns"
        [downloadable]="true"
        downloadMode="direct"
        downloadFormat="csv"
        downloadFilename="products-full"
        [sortable]="true"
        [filterable]="true"
        [globalFilter]="true"
        selectionMode="multiple"
        [(selection)]="selectedProducts"
        [showActions]="true"
        [actions]="tableActions"
        [striped]="true"
        [hoverable]="true"
        (onSort)="onSort($event)"
        (onFilter)="onFilter($event)"
        (onSelectionChange)="onSelectionChange($event)"
        (onAction)="handleAction($event)"
      >
        <div header style="display: flex; align-items: center; gap: 8px">
          <i class="pi pi-box" style="font-size: 1.25rem; color: var(--color-primary)"></i>
          <h3 style="margin: 0; font-size: 1.1rem">Product Inventory â€” Full</h3>
        </div>
      </i-table>
    </app-demo-card>

    <!-- Features -->
    <app-demo-card [title]="'Features'">
      <app-features-list [features]="features"></app-features-list>
    </app-demo-card>
  </div>
</div>
