<div class="listboxes-demo">
  <header class="demo-header">
    <h1>Listbox Components</h1>
    <p>
      Always visible option lists with single and multiple selection modes.
      Features a modern header with title and action button, option icons, chip
      display in multiselect mode, built-in filtering, and full reactive forms
      support.
    </p>
  </header>

  <div class="cards-container">
    <!-- Multiple Selection with Action Button -->
    <app-demo-card
      [title]="'Multiple Selection with Action Button'"
      [sourceCode]="codeExamples.multiple"
    >
      <i-listbox
        title="Countries"
        [options]="countries"
        optionLabel="name"
        [multiple]="true"
        [showClear]="true"
        actionIcon="pi pi-plus"
        actionTooltip="Add Country"
        (onAction)="onAddCountry()"
        [(ngModel)]="selectedCountriesMultiple"
        (onChange)="onMultipleSelectionChange($event)"
        (onClear)="onClear()"
      ></i-listbox>
    </app-demo-card>

    <!-- Single Selection (No Checkboxes) -->
    <app-demo-card
      [title]="'Single Selection (No Checkboxes)'"
      [sourceCode]="codeExamples.single"
    >
      <i-listbox
        title="Select Country"
        [options]="countries"
        optionLabel="name"
        [multiple]="false"
        [showClear]="true"
        [(ngModel)]="selectedCountrySingle"
        (onChange)="onSingleSelectionChange($event)"
        (onClear)="onClear()"
      ></i-listbox>
    </app-demo-card>

    <!-- Options with Icons -->
    <app-demo-card
      [title]="'Options with Icons'"
      [sourceCode]="codeExamples.withIcons"
    >
      <i-listbox
        title="Tasks"
        [options]="tasks"
        optionLabel="name"
        [multiple]="true"
        optionIcon="icon"
        actionIcon="pi pi-cog"
        actionTooltip="Manage Tasks"
        (onAction)="onManageTasks()"
        [(ngModel)]="selectedTasks"
      ></i-listbox>
    </app-demo-card>

    <!-- Display as Menu -->
    <app-demo-card
      [title]="'Display as Menu'"
      [sourceCode]="codeExamples.displayAsMenu"
    >
      <i-listbox
        title="Navigation"
        [options]="menuItems"
        optionLabel="name"
        [multiple]="false"
        [displayAsMenu]="true"
        [filter]="false"
        [(ngModel)]="selectedMenuItem"
      ></i-listbox>
    </app-demo-card>

    <!-- With Filtering -->
    <app-demo-card
      [title]="'With Filtering'"
      [sourceCode]="codeExamples.filter"
    >
      <div class="demo-form">
        <i-listbox
          title="Searchable Countries"
          [options]="countries"
          optionLabel="name"
          [multiple]="true"
          [filter]="true"
          filterBy="name"
          [showClear]="true"
        ></i-listbox>
      </div>
    </app-demo-card>

    <!-- Fluid Layout -->
    <app-demo-card [title]="'Fluid Layout'" [sourceCode]="codeExamples.fluid">
      <div class="demo-form">
        <i-listbox
          title="Full Width Listbox"
          [options]="countries"
          optionLabel="name"
          [multiple]="true"
          [fluid]="true"
          [showClear]="true"
        ></i-listbox>
      </div>
    </app-demo-card>

    <!-- Disabled State -->
    <app-demo-card
      [title]="'Disabled State'"
      [sourceCode]="codeExamples.disabled"
    >
      <div class="demo-form">
        <i-listbox
          title="Disabled Listbox"
          [options]="countries"
          optionLabel="name"
          [multiple]="true"
          [disabled]="true"
          [ngModel]="[
            { name: 'United States', code: 'US' },
            { name: 'Canada', code: 'CA' }
          ]"
        ></i-listbox>
      </div>
    </app-demo-card>

    <!-- Reactive Forms with Observable Data -->
    <app-demo-card
      [title]="'Reactive Forms + Observable Data'"
      [sourceCode]="codeExamples.reactive"
    >
      <div class="demo-form">
        <form [formGroup]="departmentsForm">
          <i-listbox
            title="Departments"
            [options]="departmentOptions$ | async"
            optionLabel="name"
            formControlName="selectedDepartments"
            [multiple]="true"
            [filter]="true"
            [showClear]="true"
            [maxSelectedLabels]="2"
            selectedItemsLabel="{0} departments selected"
          ></i-listbox>
        </form>

        <div
          class="demo-info"
          style="
            margin-top: 1rem;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: 4px;
            font-size: 0.9rem;
          "
        >
          <strong>Dynamic Data Demo:</strong> New departments are added every 5
          seconds to showcase observable data updates. <br /><strong
            >Form Value:</strong
          >
          {{ departmentsForm.get("selectedDepartments")?.value | json }}
          <br /><strong>Form Valid:</strong> {{ departmentsForm.valid }}
          <br /><strong>Available Options:</strong>
          {{ (departmentOptions$ | async)?.length || 0 }}
        </div>
      </div>
    </app-demo-card>

    <!-- Constrained Height -->
    <app-demo-card
      class="constrained-demo-card"
      [title]="'Constrained Height Container (500px)'"
      [sourceCode]="codeExamples.constrained"
    >
      <div class="wrapper">
        <i-listbox
          title="Items (50 total)"
          [options]="largeDataset"
          optionLabel="name"
          [multiple]="false"
          [filter]="true"
          [showClear]="true"
          [(ngModel)]="selectedLargeItems"
        ></i-listbox>
      </div>
    </app-demo-card>

    <!-- Features -->
    <app-demo-card [title]="'Features'">
      <app-features-list [features]="features"></app-features-list>
    </app-demo-card>
  </div>
</div>
